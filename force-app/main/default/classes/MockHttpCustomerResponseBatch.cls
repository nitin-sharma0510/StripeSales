@isTest
global class MockHttpCustomerResponseBatch implements HttpCalloutMock{

    public static String jsonstr = '{"object":"list","data":[{"id":"cus_GVYvEgjrYJUq7s","object":"customer","account_balance":0,"address":{"city":"rnc","country":"IN","line1":"firayalal chowk","line2":"main road","postal_code":"834001","state":"JH"},"balance":0,"created":1578464048,"currency":"inr","default_source":"card_1FyXzyGAJHaJ7JBvES5LIG5h","delinquent":false,"description":"testing","discount":null,"email":"shroth@teqfocus.com","invoice_prefix":"E1CD1BFA","invoice_settings":{"custom_fields":null,"default_payment_method":null,"footer":null},"livemode":false,"metadata":{},"name":"saurav shroth","phone":"+918002486307","preferred_locales":["en"],"shipping":{"address":{"city":"rnc","country":"IN","line1":"firayalal chowk","line2":"main road","postal_code":"834001","state":"JH"},"name":"saurav shroth","phone":"+918002486307"},"sources":{"object":"list","data":[{"id":"card_1FyXzyGAJHaJ7JBvES5LIG5h","object":"card","address_city":"rnc","address_country":"IN","address_line1":"firayalal chowk","address_line1_check":"pass","address_line2":"main road","address_state":"jharkhand","address_zip":"834001","address_zip_check":"pass","brand":"Visa","country":"US","customer":"cus_GVYvEgjrYJUq7s","cvc_check":"pass","dynamic_last4":null,"exp_month":12,"exp_year":2020,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","last4":"4242","metadata":{},"name":"saurav","tokenization_method":null}],"has_more":false,"total_count":1,"url":"/v1/customers/cus_GVYvEgjrYJUq7s/sources"},"subscriptions":{"object":"list","data":[{"id":"sub_GVZGgSyyUXYgaU","object":"subscription","application_fee_percent":null,"billing":"charge_automatically","billing_cycle_anchor":1578465295,"billing_thresholds":null,"cancel_at":null,"cancel_at_period_end":false,"canceled_at":null,"collection_method":"charge_automatically","created":1578465295,"current_period_end":1581143695,"current_period_start":1578465295,"customer":"cus_GVYvEgjrYJUq7s","days_until_due":null,"default_payment_method":null,"default_source":null,"default_tax_rates":[],"discount":null,"ended_at":null,"invoice_customer_balance_settings":{"consume_applied_balance_on_void":true},"items":{"object":"list","data":[{"id":"si_GVZGrMHarjAhNI","object":"subscription_item","billing_thresholds":null,"created":1578465295,"metadata":{},"plan":{"id":"plan_GQi6tbbYH0hTPa","object":"plan","active":true,"aggregate_usage":null,"amount":0,"amount_decimal":"0","billing_scheme":"per_unit","created":1577344953,"currency":"inr","interval":"month","interval_count":1,"livemode":false,"metadata":{},"nickname":"monthly test","product":"prod_GQi24wErrr91of","tiers":null,"tiers_mode":null,"transform_usage":null,"trial_period_days":null,"usage_type":"licensed"},"quantity":1,"subscription":"sub_GVZGgSyyUXYgaU","tax_rates":[]}],"has_more":false,"total_count":1,"url":"/v1/subscription_items?subscription=sub_GVZGgSyyUXYgaU"},"latest_invoice":"in_1FyY83GAJHaJ7JBvUrvyF4tH","livemode":false,"metadata":{},"next_pending_invoice_item_invoice":null,"pending_invoice_item_interval":null,"pending_setup_intent":null,"plan":{"id":"plan_GQi6tbbYH0hTPa","object":"plan","active":true,"aggregate_usage":null,"amount":0,"amount_decimal":"0","billing_scheme":"per_unit","created":1577344953,"currency":"inr","interval":"month","interval_count":1,"livemode":false,"metadata":{},"nickname":"monthly test","product":"prod_GQi24wErrr91of","tiers":null,"tiers_mode":null,"transform_usage":null,"trial_period_days":null,"usage_type":"licensed"},"quantity":1,"schedule":null,"start":1578465295,"start_date":1578465295,"status":"active","tax_percent":null,"trial_end":null,"trial_start":null}],"has_more":false,"total_count":1,"url":"/v1/customers/cus_GVYvEgjrYJUq7s/subscriptions"},"tax_exempt":"none","tax_ids":{"object":"list","data":[],"has_more":false,"total_count":0,"url":"/v1/customers/cus_GVYvEgjrYJUq7s/tax_ids"},"tax_info":null,"tax_info_verification":null}],"has_more":false,"url":"/v1/customers"}';
    global HTTPResponse respond(HTTPRequest req) {
        // Optionally, only send a mock response for a specific endpoint
        // and method.
        System.assertEquals(True, req.getEndpoint().contains('https://api.stripe.com/v1/'));
        //System.assertEquals('GET', req.getMethod());
        
        // Create a fake response
        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'application/json');
        res.setBody(jsonstr);
        res.setStatusCode(200);
        return res;
    }
}