@isTest
public class SyncAllStripeChargesBatchTest {
    public static String jsonstr = '{"object":"list","data":[{"id":"ch_1FyYFkGAJHaJ7JBvwUMC6Qbr","object":"charge","amount":10000,"amount_refunded":0,"application":null,"application_fee":null,"application_fee_amount":null,"balance_transaction":"txn_1FyYFkGAJHaJ7JBv9yLwMQpN","billing_details":{"address":{"city":"rnc","country":"IN","line1":"firayalal chowk","line2":"main road","postal_code":"834001","state":"jharkhand"},"email":null,"name":"saurav","phone":null},"captured":true,"created":1578465772,"currency":"inr","customer":"cus_GVYvEgjrYJUq7s","description":"testing 17","destination":null,"dispute":null,"disputed":false,"failure_code":null,"failure_message":null,"fraud_details":{},"invoice":null,"livemode":false,"metadata":{},"on_behalf_of":null,"order":null,"outcome":{"network_status":"approved_by_network","reason":null,"risk_level":"normal","risk_score":0,"seller_message":"Payment complete.","type":"authorized"},"paid":true,"payment_intent":"pi_1FyYFjGAJHaJ7JBvdvFh20sx","payment_method":"card_1FyXzyGAJHaJ7JBvES5LIG5h","payment_method_details":{"card":{"brand":"visa","checks":{"address_line1_check":"pass","address_postal_code_check":"pass","cvc_check":null},"country":"US","exp_month":12,"exp_year":2020,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","installments":null,"last4":"4242","network":"visa","three_d_secure":null,"wallet":null},"type":"card"},"receipt_email":null,"receipt_number":null,"receipt_url":"https://pay.stripe.com/receipts/acct_1FExPKGAJHaJ7JBv/ch_1FyYFkGAJHaJ7JBvwUMC6Qbr/rcpt_GVZOSpwHohqzW7Pb4ASjvu2h9V51aJC","refunded":false,"refunds":{"object":"list","data":[],"has_more":false,"total_count":0,"url":"/v1/charges/ch_1FyYFkGAJHaJ7JBvwUMC6Qbr/refunds"},"review":null,"shipping":null,"source":{"id":"card_1FyXzyGAJHaJ7JBvES5LIG5h","object":"card","address_city":"rnc","address_country":"IN","address_line1":"firayalal chowk","address_line1_check":"pass","address_line2":"main road","address_state":"jharkhand","address_zip":"834001","address_zip_check":"pass","brand":"Visa","country":"US","customer":"cus_GVYvEgjrYJUq7s","cvc_check":null,"dynamic_last4":null,"exp_month":12,"exp_year":2020,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","last4":"4242","metadata":{},"name":"saurav","tokenization_method":null},"source_transfer":null,"statement_descriptor":"testing 17","statement_descriptor_suffix":null,"status":"succeeded","transfer_data":null,"transfer_group":null},{"id":"ch_1FyIAZGAJHaJ7JBvfYiNLL6b","object":"charge","amount":40000,"amount_refunded":0,"application":null,"application_fee":null,"application_fee_amount":null,"balance_transaction":"txn_1FyIAaGAJHaJ7JBvJglai20C","billing_details":{"address":{"city":null,"country":null,"line1":null,"line2":null,"postal_code":null,"state":null},"email":null,"name":null,"phone":null},"captured":true,"created":1578403947,"currency":"usd","customer":"cus_GVFySSXtN9cWO7","description":"Subscription creation","destination":null,"dispute":null,"disputed":false,"failure_code":null,"failure_message":null,"fraud_details":{},"invoice":"in_1FyIAZGAJHaJ7JBvOxUhhxWY","livemode":false,"metadata":{},"on_behalf_of":null,"order":null,"outcome":{"network_status":"approved_by_network","reason":null,"risk_level":"normal","risk_score":43,"seller_message":"Payment complete.","type":"authorized"},"paid":true,"payment_intent":"pi_1FyIAZGAJHaJ7JBvCMWzpexJ","payment_method":"card_1FyGGtGAJHaJ7JBvdHl3sGQ2","payment_method_details":{"card":{"brand":"visa","checks":{"address_line1_check":null,"address_postal_code_check":null,"cvc_check":null},"country":"US","exp_month":12,"exp_year":2024,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","installments":null,"last4":"4242","network":"visa","three_d_secure":null,"wallet":null},"type":"card"},"receipt_email":null,"receipt_number":null,"receipt_url":"https://pay.stripe.com/receipts/acct_1FExPKGAJHaJ7JBv/ch_1FyIAZGAJHaJ7JBvfYiNLL6b/rcpt_GVImyCn8UT0Uz2Y4yBlxRJV0UcG0faW","refunded":false,"refunds":{"object":"list","data":[],"has_more":false,"total_count":0,"url":"/v1/charges/ch_1FyIAZGAJHaJ7JBvfYiNLL6b/refunds"},"review":null,"shipping":null,"source":{"id":"card_1FyGGtGAJHaJ7JBvdHl3sGQ2","object":"card","address_city":null,"address_country":null,"address_line1":null,"address_line1_check":null,"address_line2":null,"address_state":null,"address_zip":null,"address_zip_check":null,"brand":"Visa","country":"US","customer":"cus_GVFySSXtN9cWO7","cvc_check":null,"dynamic_last4":null,"exp_month":12,"exp_year":2024,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","last4":"4242","metadata":{},"name":null,"tokenization_method":null},"source_transfer":null,"statement_descriptor":null,"statement_descriptor_suffix":null,"status":"succeeded","transfer_data":null,"transfer_group":null},{"id":"ch_1FyGLbGAJHaJ7JBvKJKZJM4d","object":"charge","amount":2000,"amount_refunded":0,"application":null,"application_fee":null,"application_fee_amount":null,"balance_transaction":"txn_1FyGLbGAJHaJ7JBv8j9FZQIS","billing_details":{"address":{"city":null,"country":null,"line1":null,"line2":null,"postal_code":null,"state":null},"email":null,"name":null,"phone":null},"captured":true,"created":1578396943,"currency":"usd","customer":"cus_GVFySSXtN9cWO7","description":"Subscription creation","destination":null,"dispute":null,"disputed":false,"failure_code":null,"failure_message":null,"fraud_details":{},"invoice":"in_1FyGLbGAJHaJ7JBvzCx5Hhxe","livemode":false,"metadata":{},"on_behalf_of":null,"order":null,"outcome":{"network_status":"approved_by_network","reason":null,"risk_level":"normal","risk_score":3,"seller_message":"Payment complete.","type":"authorized"},"paid":true,"payment_intent":"pi_1FyGLbGAJHaJ7JBvbB43ZCnC","payment_method":"card_1FyGGtGAJHaJ7JBvdHl3sGQ2","payment_method_details":{"card":{"brand":"visa","checks":{"address_line1_check":null,"address_postal_code_check":null,"cvc_check":"pass"},"country":"US","exp_month":12,"exp_year":2024,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","installments":null,"last4":"4242","network":"visa","three_d_secure":null,"wallet":null},"type":"card"},"receipt_email":null,"receipt_number":null,"receipt_url":"https://pay.stripe.com/receipts/acct_1FExPKGAJHaJ7JBv/ch_1FyGLbGAJHaJ7JBvKJKZJM4d/rcpt_GVGt1NXm0yR5ofNruemMiZU6WDxRWII","refunded":false,"refunds":{"object":"list","data":[],"has_more":false,"total_count":0,"url":"/v1/charges/ch_1FyGLbGAJHaJ7JBvKJKZJM4d/refunds"},"review":null,"shipping":null,"source":{"id":"card_1FyGGtGAJHaJ7JBvdHl3sGQ2","object":"card","address_city":null,"address_country":null,"address_line1":null,"address_line1_check":null,"address_line2":null,"address_state":null,"address_zip":null,"address_zip_check":null,"brand":"Visa","country":"US","customer":"cus_GVFySSXtN9cWO7","cvc_check":"pass","dynamic_last4":null,"exp_month":12,"exp_year":2024,"fingerprint":"oePqmlAucC7HkpIQ","funding":"credit","last4":"4242","metadata":{},"name":null,"tokenization_method":null},"source_transfer":null,"statement_descriptor":null,"statement_descriptor_suffix":null,"status":"succeeded","transfer_data":null,"transfer_group":null}],"has_more":false,"url":"/v1/charges"}';
    
    static testMethod void testBatch(){
        
        Stripe_Account__c acc=TestUtils.createStripeAccount();
        
        Test.startTest();
        	SyncAllStripeChargesBatch syncBatch = new SyncAllStripeChargesBatch(acc.Id,null);
        	Database.executeBatch(syncBatch);
        Test.stopTest();
    }

}